graph TB
    %% Client Layer
    Client[ğŸŒ Client Applications<br/>Browser, Postman, Mobile]
    
    %% Docker Container
    subgraph Docker["ğŸ³ Docker Container"]
        %% Server and API Layer combined
        subgraph ServerAPI["ğŸ“¡ Express.js Server & API Routes"]
            ExpressCore[ğŸ”’ Security & CORS & JSON<br/>â¤ï¸ Health Check<br/>âš ï¸ Error Handler]
            Routes[ğŸ›£ï¸ Banking Routes<br/>POST /api/accounts, GET /api/accounts/:id<br/>POST /api/accounts/:id/deposit, /api/accounts/:id/withdraw<br/>POST /api/transfer, GET /api/accounts/:id/transactions]
        end
        
        %% Business Logic Layer
        subgraph BusinessLayer["ğŸ® Application Layer"]
            Controller[Banking Controller<br/>Request Processing]
            Service[Banking Service<br/>Business Logic & Atomic Transactions]
        end
        
        %% Data and Model Layer
        subgraph DataModel["ğŸ’¾ Data & Model Layer"]
            AccountModel[Account Model<br/>deposit, withdraw, transactions]
            Storage[In-Memory Storage<br/>Accounts Map & Transaction Locks]
        end
        
        %% Support Systems
        subgraph Support["ğŸ› ï¸ Support Systems"]
            Logger[ğŸ“ Logger<br/>Audit & Debug Logs]
            Tests[ğŸ§ª Tests<br/>Unit & Integration]
        end
    end
    
    %% Atomic Transaction Process (side panel)
    subgraph AtomicFlow["ğŸ”’ Atomic Transaction Steps"]
        Steps["Acquire Lock âœ Validate Balance<br/>Execute Transfer âœ Log Transaction<br/>Release Lock âœ Return Result"]
    end
    
    %% Main Flow Connections
    Client --> ExpressCore
    ExpressCore --> Routes
    Routes --> Controller
    Controller --> Service
    Service --> AccountModel
    AccountModel --> Storage
    
    %% Cross-cutting concerns
    Service -.->|Uses| AtomicFlow
    Controller -.->|Logs to| Logger
    Service -.->|Logs to| Logger
    Tests -.->|Validates| Service
    Tests -.->|Validates| AccountModel
    
    %% Styling for better visual balance
    classDef clientStyle fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef serverStyle fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef businessStyle fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef dataStyle fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef supportStyle fill:#f0fdf4,stroke:#16a34a,stroke-width:2px
    classDef atomicStyle fill:#fef3c7,stroke:#f59e0b,stroke-width:2px
    
    class Client clientStyle
    class ServerAPI,ExpressCore,Routes serverStyle
    class BusinessLayer,Controller,Service businessStyle
    class DataModel,AccountModel,Storage dataStyle
    class Support,Logger,Tests supportStyle
    class AtomicFlow,Steps atomicStyle